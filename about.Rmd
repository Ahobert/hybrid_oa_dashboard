---
title: "About the Hybrid OA Dashboard"
output:
  html_document:
    toc: yes
    toc_depth: 2
    toc_float: true
    keep_md: true
bibliography: references.bib
---

```{r, echo = FALSE}

knitr::opts_chunk$set(
  comment = "#>",
  collapse = TRUE,
  warning = FALSE,
  message = FALSE,
  echo = FALSE,
  fig.width = 9,
  fig.height = 6
)
options(scipen = 999, digits = 0)
knitr::knit_hooks$set(inline = function(x) {
  prettyNum(x, big.mark = ",")
})
```

```{r}
# load dplyr
library(dplyr)
# load data
hybrid_df <- jsonlite::stream_in(file("data/hybrid_license_indicators.json"), verbose = FALSE)
#' load facets results
jn_facets <- jsonlite::stream_in(file("data/jn_facets_df.json"), verbose = FALSE)
#' get hybrid journals that have open licensing information in the period 2013-17
hybrid_cr <- jsonlite::stream_in(file("data/hybrid_license_indicators.json"), verbose = FALSE)
```

## Summary 

This open source dashboard presents the uptake of hybrid open access for `r dplyr::n_distinct(hybrid_df$journal_title)` journals from `r dplyr::n_distinct(hybrid_df$publisher)` publishers between 2013 - 2017. Hybrid open access journals are included when they meet the following two conditions:

1. academic institutions sponsored the publication fee or have agreed upon an offsetting agreement according to the [Open APC initiative](https://github.com/openapc/openapc-de),
2. publishers shared licensing information about fulltext accessibility and re-use rights with  [Crossref](https://www.crossref.org/).

By bringing together openly available datasets about hybrid open access into one easy-to-use tool, this dashboard demonstrates how existing pieces of an evolving and freely available data infrastructure for monitoring scholarly publishing can be re-used to gain a better understanding of hybrid open access publishing. It, thus, contributes to recent calls from the [Open Access 2020 Initiative](https://oa2020.org/) and [Open Knowledge](https://blog.okfn.org/2017/10/24/understanding-the-costs-of-scholarly-publishing-why-we-need-a-public-data-infrastructure-of-publishing-costs/) aiming at a data-driven debate about how to transition subscription-based journal publishing to open access.

This document gives information about the study design, as well as how to use the dashboard. Because this open source dashboard is built around already existing infrastructure services for scholarly publishing, this doc will also provide guidance about how publishers can properly report hybrid open access journal articles to Crossref in accordance with evolving standards like the [ESAC guidelines](http://esac-initiative.org/its-the-workflows-stupid-what-is-required-to-make-offsetting-work-for-the-open-access-transition/).

## Data and methods

Many publishers offer hybrid open access journals. However, because of non-standardized practices to report open access, it is hard to keep track of how many articles were made immediately available in this way, and to what extent these figures relate to the overall article volume [@Bj_rk_2017].

As a start, data from the [Open APC initiative](https://github.com/OpenAPC/openapc-de/) was used.
This open data initiative crowd-source information about spending on open access journal articles from various international research organisations. [Its openly available dataset](https://github.com/OpenAPC/openapc-de/blob/master/data/apc_de.csv) differentiates expenditure for articles published in hybrid and in full open access journals. It also has a dedicated dataset containing metadata about articles, which were made openly available as part of [offsetting deals](https://github.com/OpenAPC/openapc-de/tree/master/data/offsetting). 

After obtaining cost data about hybrid open access journal articles from the Open APC initiative, [Crossref's REST API](https://github.com/CrossRef/rest-api-doc) was queried to discover open access articles published in these journals, as well as to retrieve yearly article volumes for the period 2013 - 2017. Using the [rcrossref](https://github.com/ropensci/rcrossref) client, developed and maintained by the [rOpenSci initiative](https://ropensci.org/), the first API call retrieved all licenses URLs available per ISSN. To control possible name changes of publishers or journal titles over the period, only the most frequent facet field name was used. After matching and normalizing  licensing URLs indicating open access articles with the help of the [dissem.in / oaDOI access indicator list](https://github.com/dissemin/dissemin/blob/0aa00972eb13a6a59e1bc04b303cdcab9189406a/backend/crossref.py#L89), a second API call checked licensing metadata to exclude delayed open access articles by using the [Crossref's REST API filters](https://github.com/CrossRef/rest-api-doc#filter-names) `license.url` and `license.delay`. Because journal business models can change from hybrid to full open access over time, the [Directory of Open Access Journals (DOAJ)](https://doaj.org/), a curated list of full open access journals, was finally checked to exclude these journals. 

Although Crossref covers many open access journals, not all publishers share comprehensive metadata about access and re-use including licenses and embargo date via Crossref. In our case, `r n_distinct(hybrid_cr$publisher)` publishers provided licensing
metadata via the Crossref API, representing `r (n_distinct(hybrid_cr$publisher) / n_distinct(jn_facets$publisher)) * 100` % of all publishers included in our study. At the journal-level, `r (n_distinct(hybrid_df$journal_title) /  n_distinct(jn_facets$journal_title)) * 100` % of all hybrid open access journal titles covered by the Open APC initiative share proper licensing metadata with Crossref.


```{r fig.path="figure/"}
library(ggplot2)
library(ggalt)
library(scales)
n_journals_df <- jn_facets %>% 
  distinct(journal_title, publisher) %>%
  group_by(publisher) %>%
  summarise(n_journals = n_distinct(journal_title))
#' all journals from open apc dataset for which we retrieved facet counts 
#' AND from licensing info from crossref 
n_hoa_df <- hybrid_cr %>%
  distinct(journal_title, publisher) %>%
  group_by(publisher) %>%
  summarise(n_hoa_journals = n_distinct(journal_title))
#' merge them into one dataframe
cvr_df <- left_join(n_journals_df, n_hoa_df, by = "publisher") %>%
#' and prepare analysis of top 10 publishers   
  tidyr::replace_na(list(n_hoa_journals = 0)) %>%
  arrange(desc(n_journals)) %>%
  mutate(publisher = forcats::as_factor(publisher)) %>%
  mutate(publisher = forcats::fct_other(publisher, drop = publisher[21:length(publisher)])) %>%
  ungroup() %>%
  group_by(publisher) %>%
  summarise(n_journals = sum(n_journals), n_hoa_journals = sum(n_hoa_journals))
#' plot
gg <- ggplot(cvr_df,
       aes(x = n_journals, xend = n_hoa_journals, y = publisher, color = group)) +
  ggalt::geom_dumbbell(
    colour="#30638E",
    colour_xend="#EDAE49",
    colour_x="#30638E",
    size_x=3.5,
    alpha = 0.9,
    size_xend = 3.5
  ) +
  scale_y_discrete(limits = rev(levels(cvr_df$publisher))) +
  scale_x_continuous(breaks = seq(0, 1500, by = 250)) +
  labs(x = "Number of Hybrid OA Journals", 
       y = NULL,
       title = "Have publishers registered open license metadata for\nhybrid open access journals at Crossref?",
       subtitle = "Notice that only those hybrid open access journals were included where\nacademic institutions sponsored the publication fee according to the Open APC initiative"
  ) +
  geom_text(data=cvr_df, 
            aes(x=850, y= "Elsevier BV", label="with Crossref licensing infos"),
            color="#EDAE49", hjust=1, size=3, nudge_x=-10) +
  geom_text(data=cvr_df, 
            aes(x=900, y= "Elsevier BV", label="All"),
            color="#30638E", hjust=0, size=3, nudge_x=10) +
  theme_minimal(base_family="Arial Narrow") +
  theme(plot.margin=margin(30,30,30,30)) +
  theme(panel.grid.minor=element_blank()) +
  theme(axis.ticks=element_blank()) +
  theme(panel.grid.major.y=element_blank()) +
  theme(panel.border=element_blank())
ggsave(gg, path = "img/", filename = "licensing_coverage.png", width = 9, height = 6, dpi = 450, device = "png")
```

![](img/licensing_coverage.png)
*Figure: Overview of Crossref licensing coverage per publisher. Yellow dots represent the number of hybrid open access journals disclosed by the Open APC initiative with licensing metadata, blue dots the overall number of hybrid open access journals in our sample.*

Methods are implemented in R and are available in the source code repository of this dashboard hosted on  [GitHub](https://github.com/njahn82/hybrid_oa_dashboard).  [`R/cr_fetching.R`](https://github.com/njahn82/hybrid_oa_dashboard/tree/master/R/cr_fetching.R) describes how licensing and journal metadata were obtained from Crossref. [`R/oapc.R`](https://github.com/njahn82/hybrid_oa_dashboard/tree/master/R/oapc.R) shows how cost information was analysed. 

Data files stored in the [`data/`](https://github.com/njahn82/hybrid_oa_dashboard/tree/master/data/) folder. It includes the indicator dataset available as json [(`data/hybrid_license_indicators.json`)](https://github.com/njahn82/hybrid_oa_dashboard/tree/master/data/hybrid_license_indicators.json) and csv file [(`data/hybrid_license_indicators.csv`)](https://github.com/njahn82/hybrid_oa_dashboard/tree/master/data/hybrid_license_indicators.csv). It is directly used by dashboard and contains the following variables:

|Variable            |Description
|:-------------------|:------------------------------------------------------------------|
|`journal_title`     |Journal Title                                                      |
|`publisher`         |Publisher Name                                                     |
|`issn`              |ISSN                                                               |
|`year`              |Publishing year                                                    |
|`license`           |Open License URL                                                   |
|`jn_published`      |Yearly article volume per journal                                  |
|`year_all`          |Yearly article volume of all journals in the dataset               |
|`year_publisher_all`|Yearly article volume of all journals in the dataset per publisher |                              |
|`license_ref_n`     |Yearly article volume under the license `license`                  |


Licensing information gathered from Crossref is also accessible: [`data/jn_facets_df.json`](https://github.com/njahn82/hybrid_oa_dashboard/tree/master/data/jn_facets_df.json) contains journal article volume and corresponding licensing information for the period  2013 - 2017 for each ISSN found in the Open APC dataset representing a hybrid open access journal. [`data/hybrid_license_df.json`](https://github.com/njahn82/hybrid_oa_dashboard/tree/master/data/jn_facets_df.json) stores information about journals with licensing metadata representing hybrid open access journal articles (excluding delayed OA and licenses that only govern text mining)

## Using the dashboard

Choose a publisher or journal via the select boxes in the left sidebar. Publisher names are decreasingly sorted according to the number of hybrid open access articles published. Corresponding journals are filtered conditionally to the publisher selection and are sorted alphabetically.

Information is presented using dynamic graphs. The first tab of the upper graph shows the relational uptake of hybrid open access, the second tab the absolute number of published hybrid open access articles. Bar charts are sub-grouped according to the licensing links found via Crossref.

The lower left chart compares the number of articles found via Open APC and Crossref for the selection. The lower right chart indicates from which countries the institutional support originated from. The figures are based on the Open APC datasets.

## As a publisher, how can I support proper hybrid open access monitoring?

Crossref supports publishers who wish to make licensing metadata available via the Crossref APIs:
<https://support.crossref.org/hc/en-us/articles/214572423-License-metadata-Access-Indicators->

As a publisher to be best represented in this dashboard, make sure to include license URL element `license_ref` and a `start_date` equal to the date of publication. Such workflow complies with ESAC's  recommendations for article workflows and services for offsetting / open access transformation agreements [@Geschuhn_2017].

## Technical notes

This [Shiny web application](https://shiny.rstudio.com/) is built using [flexdashboard](http://rmarkdown.rstudio.com/flexdashboard/) package. The app is powered by the excellent graphic packages [plotly](https://github.com/ropensci/plotly), [ggplot2](http://ggplot2.tidyverse.org/) and [ggalt](https://github.com/hrbrmstr/ggalt), as well as  [readr](http://readr.tidyverse.org/) for data import. Data analysis makes use of [dplyr](http://dplyr.tidyverse.org/).

## How to contribute?

This dashboard has been developed in the open using open tools. There are a number of ways you can help make the dashboard better:

- If you don’t understand something, please let me know and [submit an issue](https://github.com/njahn82/hybrid_oa_dashboard/issues).

- Feel free to add new features or fix bugs by sending a [pull request](https://github.com/njahn82/hybrid_oa_dashboard/pulls).

Please note that this project is released with a [Contributor Code of Conduct](https://github.com/njahn82/hybrid_oa_dashboard/CONDUCT.md). By participating in this project you agree to abide by its terms.

## Meta

Author: Najko Jahn (Scholarly Communication Analyst, [SUB Göttingen](https://www.sub.uni-goettingen.de/)), 2017.

The R Markdown file, which includes the underlying source code for this document, is available [here](https://github.com/njahn82/hybrid_oa_dashboard/blob/master/about.Rmd).

<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.

## Bibliography
